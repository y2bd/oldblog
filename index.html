
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>this has yet to be defined</title>
  <meta name="author" content="y2bd">

  
  <meta name="description" content="It&rsquo;s been almost two months now, but Sofa, my journal application for Windows Phone 8, is finally done! First of all, the last time I referred &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://y2bd.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="this has yet to be defined" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  

</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner">
</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:y2bd.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/blog/2013/09/09/sofa-is-done/">Sofa Is Done!</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2013-09-09T21:26:00-07:00" pubdate data-updated="true">Sep 9<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/images/posts/sofa.png" title="'The read, new, and photos views.'" ></p>

<p>It&rsquo;s been almost two months now, but Sofa, my journal application for Windows Phone 8, is finally done!</p>

<p>First of all, the last time I referred to Sofa I called it &lsquo;Quill&rsquo;. That was its work-in-progress name, but I had to change it because I couldn&rsquo;t find a nice quill vector to use as the main logo. No problem, Sofa was actually how I referred to the app within the code anyway, and it&rsquo;s still a nice title. Maybe I&rsquo;ll use Quill for something else&hellip;</p>

<p>This is easily the biggest programming project (hell, maybe even general project) that I&rsquo;ve worked on, and I&rsquo;ve learned a <em>ton</em> since I started. I now have a much better grip on Git, and by that I mean I know more than <code>git commit -am "Did stuff"</code> and <code>git push origin master</code>. I learned more about branching, merging, stashing (ran into a nasty problem with that), and am currently learning about rebasing because I have way too many one-line-changed commits.</p>

<p>I&rsquo;ve also learned a lot more about the tools and libraries I&rsquo;ve been using in my small WP dev &lsquo;career&rsquo;. From the Windows Phone Toolkit (which I ended up having to fork to fix a bug), to MVVMLight (minimal code-behind, I promise!), to new tools like SQLite and Microsoft&rsquo;s LiveSDK (for SkyDrive integration, need those bullet-point features).</p>

<p>I <em>think</em> I&rsquo;ve also learned to finally accept a v1 product&mdash;there are tons of features that I want for Sofa, but I needed to realize that if I spend way too much time trying to perfect it, I&rsquo;ll fall into my trap of getting frustrated, getting bored, and then giving up on it altogether (I have enough half-finished VS solutions to show the effects of this).</p>

<p>The last week and a half have been spent with some <em>awesome</em> beta testers who have been extremely helpful in finding bugs, little quirks, and feature suggestions. I am definitely having beta periods for all of my serious apps from now on.</p>

<p>Sofa has been in the approval process for the last two days and you wouldn&rsquo;t believe how nervous I am. Every morning I wake up, scramble to my phone, and falter, looking at that mail icon with a number next to it. I&rsquo;ve gotten &ldquo;Certification Failed&rdquo; for my other apps before (Dammit Pinned, get along with the budget phones!), and I really don&rsquo;t want that to happen now. There&rsquo;s two weeks until I have to move back to Southern California for college, and I have no idea what kind of free time I&rsquo;ll have once that happens.</p>

<p>Wish me luck!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/blog/2013/08/27/my-multiline-textbox-configuration/">My Multiline Textbox Configuration</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2013-08-27T20:04:00-07:00" pubdate data-updated="true">Aug 27<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;m still working on Quill, but I figured this construct was useful enough for me to save in its
purest form, before I uglify it with orientation hacks.</p>

<p>This is an implementation of a properly-behaving multiline TextBox for Windows Phone. The original implementation
was sourced from <a href="http://klingdigital.net/2013/06/scrollviewer-and-multiline-textbox-windowsphone">KlingDigital</a>.
I just made extremely minor modifications, mostly refactoring to make it easier to modify (adding an input scope,
supporting landscape, etc).</p>

<p>Here is the XAML:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;phone:PhoneApplicationPage</span>
</span><span class='line'>    <span class="na">x:Class=</span><span class="s">&quot;Autocomplete.MainPage&quot;</span>
</span><span class='line'>    <span class="na">xmlns=</span><span class="s">&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;</span>
</span><span class='line'>    <span class="na">xmlns:x=</span><span class="s">&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;</span>
</span><span class='line'>    <span class="na">xmlns:phone=</span><span class="s">&quot;clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone&quot;</span>
</span><span class='line'>    <span class="na">xmlns:shell=</span><span class="s">&quot;clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone&quot;</span>
</span><span class='line'>    <span class="na">xmlns:d=</span><span class="s">&quot;http://schemas.microsoft.com/expression/blend/2008&quot;</span>
</span><span class='line'>    <span class="na">xmlns:mc=</span><span class="s">&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot;</span>
</span><span class='line'>    <span class="na">mc:Ignorable=</span><span class="s">&quot;d&quot;</span>
</span><span class='line'>    <span class="na">FontFamily=</span><span class="s">&quot;{StaticResource PhoneFontFamilyNormal}&quot;</span>
</span><span class='line'>    <span class="na">FontSize=</span><span class="s">&quot;{StaticResource PhoneFontSizeNormal}&quot;</span>
</span><span class='line'>    <span class="na">Foreground=</span><span class="s">&quot;{StaticResource PhoneForegroundBrush}&quot;</span>
</span><span class='line'>    <span class="na">SupportedOrientations=</span><span class="s">&quot;Portrait&quot;</span> <span class="na">Orientation=</span><span class="s">&quot;Portrait&quot;</span>
</span><span class='line'>    <span class="na">shell:SystemTray.IsVisible=</span><span class="s">&quot;True&quot;</span>
</span><span class='line'>    <span class="na">Loaded=</span><span class="s">&quot;PhoneApplicationPage_Loaded&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">&lt;!--LayoutRoot is the root grid where all page content is placed--&gt;</span>
</span><span class='line'>    <span class="nt">&lt;Grid</span> <span class="na">x:Name=</span><span class="s">&quot;LayoutRoot&quot;</span> <span class="na">Background=</span><span class="s">&quot;Transparent&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;Grid.RowDefinitions&gt;</span>
</span><span class='line'>            <span class="nt">&lt;RowDefinition/&gt;</span>
</span><span class='line'>            <span class="nt">&lt;RowDefinition</span> <span class="na">Height=</span><span class="s">&quot;Auto&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/Grid.RowDefinitions&gt;</span>
</span><span class='line'>
</span><span class='line'>        <span class="nt">&lt;ScrollViewer</span> <span class="na">x:Name=</span><span class="s">&quot;Scroller&quot;</span>
</span><span class='line'>                      <span class="na">Background=</span><span class="s">&quot;#1ba1e2&quot;</span>
</span><span class='line'>                      <span class="na">Grid.Row=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;StackPanel</span> <span class="na">VerticalAlignment=</span><span class="s">&quot;Top&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>                <span class="nt">&lt;TextBox</span> <span class="na">x:Name=</span><span class="s">&quot;ScrollerInput&quot;</span>
</span><span class='line'>                         <span class="na">TextWrapping=</span><span class="s">&quot;Wrap&quot;</span>
</span><span class='line'>                         <span class="na">AcceptsReturn=</span><span class="s">&quot;True&quot;</span>
</span><span class='line'>                         <span class="na">TextChanged=</span><span class="s">&quot;ScrollerInput_TextChanged&quot;</span>
</span><span class='line'>                         <span class="na">GotFocus=</span><span class="s">&quot;ScrollerInput_GotFocus&quot;</span>
</span><span class='line'>                         <span class="na">LostFocus=</span><span class="s">&quot;ScrollerInput_LostFocus&quot;</span>
</span><span class='line'>                         <span class="na">Tap=</span><span class="s">&quot;ScrollerInput_Tap&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>            <span class="nt">&lt;/StackPanel&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/ScrollViewer&gt;</span>
</span><span class='line'>
</span><span class='line'>        <span class="nt">&lt;Grid</span> <span class="na">x:Name=</span><span class="s">&quot;KeyboardPlaceholder&quot;</span>
</span><span class='line'>              <span class="na">Grid.Row=</span><span class="s">&quot;1&quot;</span>
</span><span class='line'>              <span class="na">Visibility=</span><span class="s">&quot;Collapsed&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/Grid&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;/phone:PhoneApplicationPage&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>and here is the codebehind:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">using</span> <span class="nn">Microsoft.Phone.Controls</span><span class="p">;</span>
</span><span class='line'><span class="k">using</span> <span class="nn">System.Windows</span><span class="p">;</span>
</span><span class='line'><span class="k">using</span> <span class="nn">System.Windows.Controls</span><span class="p">;</span>
</span><span class='line'><span class="k">using</span> <span class="nn">System.Windows.Media</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">namespace</span> <span class="nn">Autocomplete</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">MainPage</span> <span class="p">:</span> <span class="n">PhoneApplicationPage</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>    <span class="k">private</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">PortraitHeight</span> <span class="p">=</span> <span class="m">336</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">private</span> <span class="kt">double</span> <span class="n">_inputHeight</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'>    <span class="k">private</span> <span class="kt">double</span> <span class="n">_tapHeight</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Constructor</span>
</span><span class='line'>    <span class="k">public</span> <span class="nf">MainPage</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>      <span class="n">InitializeComponent</span><span class="p">();</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">private</span> <span class="k">void</span> <span class="nf">SizePlaceholder</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>      <span class="n">KeyboardPlaceholder</span><span class="p">.</span><span class="n">Height</span> <span class="p">=</span> <span class="n">PortraitHeight</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">private</span> <span class="k">void</span> <span class="nf">ForceLayout</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>      <span class="n">App</span><span class="p">.</span><span class="n">RootFrame</span><span class="p">.</span><span class="n">RenderTransform</span> <span class="p">=</span> <span class="k">new</span> <span class="n">CompositeTransform</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">LayoutRoot</span><span class="p">.</span><span class="n">UpdateLayout</span><span class="p">();</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">private</span> <span class="k">void</span> <span class="nf">PhoneApplicationPage_Loaded</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">RoutedEventArgs</span> <span class="n">e</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">private</span> <span class="k">void</span> <span class="nf">ScrollerInput_TextChanged</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">TextChangedEventArgs</span> <span class="n">e</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>      <span class="c1">// updates seem to be late if we don&#39;t invoke them with the dispatcher</span>
</span><span class='line'>      <span class="n">Dispatcher</span><span class="p">.</span><span class="n">BeginInvoke</span><span class="p">(()</span> <span class="p">=&gt;</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>        <span class="kt">double</span> <span class="n">currentInputHeight</span> <span class="p">=</span> <span class="n">ScrollerInput</span><span class="p">.</span><span class="n">ActualHeight</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">currentInputHeight</span> <span class="p">&gt;</span> <span class="n">_inputHeight</span><span class="p">)</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>          <span class="c1">// scroll up by the difference between the current box size and the old box size</span>
</span><span class='line'>          <span class="n">Scroller</span><span class="p">.</span><span class="n">ScrollToVerticalOffset</span><span class="p">(</span><span class="n">Scroller</span><span class="p">.</span><span class="n">VerticalOffset</span> <span class="p">+</span> <span class="n">currentInputHeight</span> <span class="p">-</span> <span class="n">_inputHeight</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">_inputHeight</span> <span class="p">=</span> <span class="n">currentInputHeight</span><span class="p">;</span>
</span><span class='line'>      <span class="p">});</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">private</span> <span class="k">void</span> <span class="nf">ScrollerInput_GotFocus</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">RoutedEventArgs</span> <span class="n">e</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>      <span class="n">KeyboardPlaceholder</span><span class="p">.</span><span class="n">Visibility</span> <span class="p">=</span> <span class="n">Visibility</span><span class="p">.</span><span class="n">Visible</span><span class="p">;</span>
</span><span class='line'>      <span class="n">SizePlaceholder</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">ForceLayout</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">Scroller</span><span class="p">.</span><span class="n">ScrollToVerticalOffset</span><span class="p">(</span><span class="n">_tapHeight</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">private</span> <span class="k">void</span> <span class="nf">ScrollerInput_LostFocus</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">RoutedEventArgs</span> <span class="n">e</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>      <span class="n">KeyboardPlaceholder</span><span class="p">.</span><span class="n">Visibility</span> <span class="p">=</span> <span class="n">Visibility</span><span class="p">.</span><span class="n">Collapsed</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">private</span> <span class="k">void</span> <span class="nf">ScrollerInput_Tap</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">System</span><span class="p">.</span><span class="n">Windows</span><span class="p">.</span><span class="n">Input</span><span class="p">.</span><span class="n">GestureEventArgs</span> <span class="n">e</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>      <span class="n">_tapHeight</span> <span class="p">=</span> <span class="n">e</span><span class="p">.</span><span class="n">GetPosition</span><span class="p">(</span><span class="n">ScrollerInput</span><span class="p">).</span><span class="n">Y</span> <span class="p">-</span> <span class="m">120</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Hopefully this template will prove useful in the future.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/blog/2013/08/16/fixing-alignment-issues-with-datatemplateselector/">Fixing Alignment Issues With DataTemplateSelector</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2013-08-16T19:24:00-07:00" pubdate data-updated="true">Aug 16<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;m currently working on a journaling application for WP8. While designing the page for browsing through past entries, I found that I needed to be able to switch between data templates for the <code>LongListSelector</code> housed in the page. Some journal entries would have just text, some would have only a header photo, and some would have both, and I needed to display the entries differently for all three cases.</p>

<p>I found <a href="http://www.geekchamp.com/articles/implementing-windows-phone-7-datatemplateselector-and-customdatatemplateselector">this article</a> describing how to recreate WPF&rsquo;s <code>DataTemplateSelector</code> class for Windows Phone. It worked fine&mdash;after remaking the base abstract class and extending it for my specific case, all you need to do is specify the different data templates in your xaml:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;DataTemplate</span> <span class="na">x:Key=</span><span class="s">&quot;EntryListItemTemplate&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;sel:EntryItemTemplateSelector&gt;</span>
</span><span class='line'>    <span class="nt">&lt;sel:EntryItemTemplateSelector.Both&gt;</span>
</span><span class='line'>      <span class="nt">&lt;DataTemplate&gt;</span> <span class="c">&lt;!-- content here --&gt;</span> <span class="nt">&lt;/DataTemplate&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/sel:EntryItemTemplateSelector.Both&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&lt;sel:EntryItemTemplateSelector.OnlyImage&gt;</span>
</span><span class='line'>      <span class="nt">&lt;DataTemplate&gt;</span> <span class="c">&lt;!-- content here --&gt;</span> <span class="nt">&lt;/DataTemplate&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/sel:EntryItemTemplateSelector.OnlyImage&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&lt;sel:EntryItemTemplateSelector.OnlyText&gt;</span>
</span><span class='line'>      <span class="nt">&lt;DataTemplate&gt;</span> <span class="c">&lt;!-- content here --&gt;</span> <span class="nt">&lt;/DataTemplate&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/sel:EntryItemTemplateSelector.OnlyText&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/sel:EntryItemTemplateSelector&gt;</span>
</span><span class='line'><span class="nt">&lt;/DataTemplate&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>A bit verbose, but it got the job done thankfully. The LongListSelector would now switch between templates as required.</p>

<p>There was a bit of a problem though.</p>

<p><img src="/images/posts/centered.png" title="'All of the elements are centered and small!'" ></p>

<p>Mordecai has the right idea.</p>

<p>All of the elements in the LongListSelector were no longer listening to the standard alignment and sizing rules, instead being only as wide as their content and staying put in the center.</p>

<p>I tried adjusting margins, hardcoding widths, <code>HorizontalAlignment=Stretch</code> <em>everything</em>, and either it wouldn&rsquo;t work, or it would make things even worse.</p>

<p>After a lot of vague googling (what exactly would you call this problem? I honestly had no idea), I arrove at the correct solution. My <code>EntryItemTemplateSelector</code>, inheriting from <code>ContentControl</code>, has a new property named <code>HorizontalContentAlignment</code>, which <a href="http://msdn.microsoft.com/en-us/library/system.windows.controls.control.horizontalcontentalignment.aspx">sets the alignment of the control&rsquo;s <em>content</em> rather than the control itself</a>. So all you have to do then is</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;sel:EntryItemTemplateSelector</span> <span class="na">HorizontalContentAlignment=</span><span class="s">&quot;Stretch&quot;</span><span class="nt">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>which gets you</p>

<p><img src="/images/posts/aligned.png" title="'Now every element is taking up the correct amount of space!'" ></p>

<p>Nothing satisfies Mordecai though.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/blog/2013/08/14/testing-code-highlighting/">Testing Code Highlighting</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2013-08-14T19:19:00-07:00" pubdate data-updated="true">Aug 14<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Let&rsquo;s see how syntax-highlighting works with this.</p>

<p>Here is some Lua code for a Love2D-based game:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
</pre></td><td class='code'><pre><code class='lua'><span class='line'><span class="c1">-- mapper.lua</span>
</span><span class='line'><span class="c1">-- loads the maps and draws them to the screen</span>
</span><span class='line'>
</span><span class='line'><span class="c1">-- requires</span>
</span><span class='line'><span class="kd">local</span> <span class="n">tileLoader</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">libs.advtileloader.Loader&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">-- constants</span>
</span><span class='line'><span class="kd">local</span> <span class="n">TOTAL_LEVELS</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'><span class="c1">-- local vars</span>
</span><span class='line'><span class="kd">local</span> <span class="k">function</span> <span class="nf">buildMapName</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</span><span class='line'>  <span class="k">return</span> <span class="s2">&quot;</span><span class="s">level_&quot;</span> <span class="o">..</span> <span class="n">index</span> <span class="o">..</span> <span class="s2">&quot;</span><span class="s">.tmx&quot;</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="c1">-- module</span>
</span><span class='line'><span class="kd">local</span> <span class="n">Mapper</span> <span class="o">=</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="n">currentLevelIndex</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>  <span class="n">maps</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function</span> <span class="nc">Mapper</span><span class="p">.</span><span class="nf">draw</span><span class="p">()</span>
</span><span class='line'>  <span class="n">love</span><span class="p">.</span><span class="n">graphics</span><span class="p">.</span><span class="n">setColor</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span> <span class="c1">-- apparently we need to do this to prevent tint</span>
</span><span class='line'>  <span class="n">Mapper</span><span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">Mapper</span><span class="p">.</span><span class="n">currentLevelIndex</span><span class="p">]:</span><span class="n">draw</span><span class="p">()</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">function</span> <span class="nc">Mapper</span><span class="p">.</span><span class="nf">getCurrentMap</span><span class="p">()</span>
</span><span class='line'>  <span class="k">return</span> <span class="n">maps</span><span class="p">[</span><span class="n">currentLevelIndex</span><span class="p">]</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="c1">-- init and return</span>
</span><span class='line'><span class="kd">local</span> <span class="k">function</span> <span class="nf">init</span><span class="p">()</span>
</span><span class='line'>  <span class="n">tileLoader</span><span class="p">.</span><span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">maps/&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">for</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">TOTAL_LEVELS</span> <span class="k">do</span>
</span><span class='line'>    <span class="kd">local</span> <span class="n">map</span> <span class="o">=</span> <span class="n">tileLoader</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">buildMapName</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">map</span><span class="p">:</span><span class="n">setDrawRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">love</span><span class="p">.</span><span class="n">graphics</span><span class="p">.</span><span class="n">getWidth</span><span class="p">(),</span> <span class="n">love</span><span class="p">.</span><span class="n">graphics</span><span class="p">.</span><span class="n">getHeight</span><span class="p">())</span>
</span><span class='line'>    <span class="n">map</span><span class="p">.</span><span class="n">drawObjects</span> <span class="o">=</span> <span class="kc">false</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">Mapper</span><span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">map</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="n">Mapper</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">return</span> <span class="n">init</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>And that&rsquo;s it.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/blog/2013/08/14/this-is-a-beginning/">This Is a Beginning</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2013-08-14T16:18:00-07:00" pubdate data-updated="true">Aug 14<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Let us see where it brings us. Right now the site theme is pretty <em>ehh</em>, and I have to configure my actual domain to point to this.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/09/09/sofa-is-done/">Sofa is done!</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/08/27/my-multiline-textbox-configuration/">My multiline Textbox configuration</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/08/16/fixing-alignment-issues-with-datatemplateselector/">Fixing alignment issues with DataTemplateSelector</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/08/14/testing-code-highlighting/">Testing Code Highlighting</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/08/14/this-is-a-beginning/">This is a beginning</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/y2bd">@y2bd</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'y2bd',
            count: 3,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - y2bd <br/>
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a>, customized with <a href="https://github.com/mjhea0/whiterspace">whiterspace</a>.</span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
